angular.module("shalotelli-angular-multiselect.templates",[]).run(["$templateCache",function(e){e.put("/directives/multi-select.html",'<div class="multi-select"><input type="text" class="form-control multi-select-container" ng-click="toggleDropdown()" value="{{displayOptions()}}" placeholder="None Selected" ng-disabled="disabled" readonly="readonly"><div class="multi-select-dropdown hide"><div class="multi-select-filters" ng-show="showFilters"><span class="multi-select-filter" ng-click="selectAll()"><input type="checkbox" ng-model="allSelected" ng-click="clickSelectAllCheckbox($event)" class="multi-select-select-all-checkbox"> Select All</span></div><!-- ./multi-select-filters --><ul><li class="multi-select-option" ng-repeat="value in values"><a class="multi-select-option-link" href="javascript:;" ng-if="!isOther(value)" ng-click="selectOption(value)" ng-class="{selected: isSelected(value)}"><input type="checkbox" ng-checked="isOptionSelected(value)" ng-click="clickCheckbox($event, value)"> {{value[labelField]}}</a><!-- ./multi-select-option-link --><div class="multi-select-other-container" ng-if="showOther && isOther(value)"><input type="text" class="form-control multi-select-other" placeholder="Other" ng-change="syncOther(value)" ng-keypress="close($event)" ng-model="shared.other"></div><!-- ./multi-select-other-container --></li><!-- ./multi-select-option --></ul></div><!-- ./multi-select-dropdown --></div>')}]),function(e){"use strict";e.module("shalotelli-angular-multiselect",["shalotelli-angular-multiselect.templates"]).provider("multiSelectConfig",function(){var e={templatePath:"/directives/multi-select.html",otherField:"isOther",otherNgModel:"other",closeOnSelect:!1};this.setDefaults=function(l){angular.extend(e,l||{})},this.$get=[function(){return e}]}).directive("multiSelect",["multiSelectConfig","$timeout","$log","$window",function(l,t,o,n){return{templateUrl:function(e,t){return void 0!==t.templatePath?t.templatePath:l.templatePath},restrict:"E",replace:!0,scope:{values:"=",model:"=",name:"@",showFilters:"@",showOther:"@",isSelected:"&",otherNgModel:"@",otherField:"@",otherEvent:"@",valueField:"@",labelField:"@",templatePath:"@",closeOnSelect:"@",emitOnSelect:"@",disabled:"="},link:function(o,i,c){function s(e){return e[o.otherField]===!0}function a(){o.shared={other:""}}var r=i.find(".multi-select-dropdown"),d=function(){var e="multiSelectUpdate",l="";return l=o.disabled?"None Available":1===o.model.length?o.model[0][o.labelField]:o.areAllSelected()&&o.model.length?"All Selected":o.model.length>1?o.model.length+" Selected":"None Selected",void 0!==c.name&&(e+="_"+c.name),o.$emit(e,l),l},u=function(){o.selectedOptions=[];for(var e=0;e<o.model.length;e++)o.selectedOptions[o.model[e][o.valueField]]=!0},h=function(e){return o.selectedOptions[e[o.valueField]]};o.displayOptions=d,o.isOptionSelected=h;var m=o.$watch("model",function(l){if(e.isDefined(l)){if(l.length){var t=v();t&&(o.shared.other=t[o.otherNgModel]||"")}m()}});o.selectedOptions=[],c.$observe("showFilters",function(e){o.showFilters=e||!0}),c.$observe("showOther",function(e){o.showOther=e||!1}),c.$observe("otherEvent",function(l){switch(void 0!==l&&l.match(/blur|keyup|enter/)||(l="keyup"),l.toLowerCase()){case"blur":case"keyup":e.element(".multi-select-other").on(l,function(){d()});break;case"enter":e.element(".multi-select-other").on("keydown keypress",function(e){13===e.which&&(e.preventDefault(),d())})}}),c.$observe("valueField",function(e){o.valueField=e||"value"}),c.$observe("otherField",function(e){o.otherField=e||l.otherField}),c.$observe("closeOnSelect",function(e){o.closeOnSelect="true"===e||l.closeOnSelect}),c.$observe("emitOnSelect",function(e){o.emitOnSelect="true"===e||l.emitOnSelect}),o.isOther=s,c.$observe("otherNgModel",function(e){o.otherNgModel=e||l.otherNgModel}),c.$observe("labelField",function(e){o.labelField=e||"label"}),e.element(document).on("click",function(e){-1===e.target.className.indexOf("multi-select")&&r.removeClass("show").addClass("hide")}),o.close=function(e){13===e.which&&(e.preventDefault(),r.removeClass("show").addClass("hide"))},o.toggleDropdown=function(){var l="multiSelectDropdownOpen";r.hasClass("hide")?(e.element("body").find(".multi-select-dropdown").removeClass("show").addClass("hide"),r.removeClass("hide").addClass("show"),void 0!==c.name&&(l+="_"+c.name,o.$emit(l)),r.height()+r.position().top>n.innerHeight&&r.addClass("dropdown-top")):r.removeClass("show").removeClass("dropdown-top").addClass("hide")},o.selectAll=function(){if(o.allSelected=o.areAllSelected(),o.model.length=0,o.allSelected)a(),u();else for(var e=0;e<o.values.length;e++){if(s(o.values[e]))return;o.selectOption(o.values[e],!0)}o.allSelected=!o.allSelected},o.clickSelectAllCheckbox=function(e){e.stopPropagation(),o.selectAll()},o.areAllSelected=function(){for(var e=!1,l=o.values.length,t=o.model.length,n=r.find(".multi-select-select-all-checkbox"),i=0;i<o.values.length;i++)s(o.values[i])&&l--;for(var c=0;c<o.model.length;c++)s(o.model[c])&&t--;return e=t===l,!e&&o.model.length>0?n.prop("indeterminate",!0):n.prop("indeterminate",!1),e};var v=function(){for(var e,l=0;l<o.model.length;l++)if(e=o.model[l],s(e))return e},p=function(e,l){var t;e=e||[];for(var n=0;n<e.length;n++)if(t=e[n],l[o.valueField]===t[o.valueField])return t},f=function(e){return p(o.model,e)};o.shared={other:""},o.syncOther=function(e){var l=f(e);l?o.shared.other||(l=o.selectOption(e,!0)):o.shared.other&&(l=o.selectOption(e,!0)),l&&(l[o.otherNgModel]=o.shared.other)},c.isSelected||u(),o.clickCheckbox=function(e,l){e.stopPropagation(),o.selectOption(l)},o.selectOption=function(l,t){var n=f(l),i="multiSelectOption";return n?(o.model.splice(o.model.indexOf(n),1),delete o.selectedOptions[n[o.valueField]],s(n)&&a()):(n=e.copy(l),o.model.push(n),o.selectedOptions[n[o.valueField]]=!0),o.closeOnSelect&&r.removeClass("show").addClass("hide"),t||(o.allSelected=o.areAllSelected()),o.emitOnSelect&&(void 0!==c.name&&(i+="_"+c.name),o.$emit(i,o.model,l)),n},o.model.length>0&&(o.allSelected=o.areAllSelected()),o.$on("multiSelectClearAll",function(){o.model.length=0,t(function(){u(),o.allSelected=!1,a()})}),o.$on("multiSelectClear",function(e,l){o.name&&o.name===l&&(o.model.length=0,t(function(){u(),o.allSelected=!1,a()}))}),o.$on("multiSelectRefreshAll",function(){t(function(){u()})}),o.$on("multiSelectRefresh",function(e,l,n){o.name&&o.name===l&&(void 0!==n&&(o.model=n),t(function(){u()}))})}}}])}(angular);
//# sourceMappingURL=multiselect.min.js.map